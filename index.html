<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Revista DSSMA | Saúde, Segurança e Meio Ambiente</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* RESET SIMPLES */
        * { margin:0; padding:0; box-sizing:border-box; }
        html { -webkit-text-size-adjust:100%; -webkit-tap-highlight-color:transparent; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background:#F2F2F2; color:#333; line-height:1.6; padding:10px;
        }
        .container { max-width:800px; margin:0 auto; }

        /* CAPA */
        .capa {
            background: linear-gradient(135deg, #378C8C 0%, #3A8C84 100%);
            color:white; border-radius:15px; padding:30px 20px; text-align:center; margin-bottom:20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .capa h1 { font-size:1.6rem; margin-bottom:10px; }
        .capa p { font-size:1rem; opacity:0.9; margin-bottom:15px; }
        .capa-icon { font-size:3rem; margin:15px 0; }

        .btn-sobre {
            margin-top:15px;
            padding:12px 20px;
            background:#ffffff22;
            color:white;
            border:2px solid white;
            border-radius:10px;
            font-weight:600;
            font-size:0.95rem;
            display:inline-flex;
            align-items:center;
            gap:8px;
            cursor:pointer;
            transition:all .2s;
        }
        .btn-sobre:hover {
            background:#ffffff33;
            transform:scale(1.03);
        }

        /* MODAL / POP-UP */
        .modal-bg {
            position:fixed;
            inset:0;
            background:rgba(0,0,0,0.55);
            backdrop-filter:blur(4px);
            display:flex;
            align-items:center;
            justify-content:center;
            opacity:0;
            pointer-events:none;
            transition:opacity .3s ease;
            z-index:999;
        }
        .modal-bg.show {
            opacity:1;
            pointer-events:auto;
        }
        .modal-box {
            background:white;
            max-width:500px;
            width:90%;
            border-radius:15px;
            padding:25px 20px;
            box-shadow:0 4px 20px rgba(0,0,0,0.25);
            animation:pop .25s ease;
        }
        @keyframes pop {
            from { transform:scale(.85); opacity:0; }
            to   { transform:scale(1); opacity:1; }
        }
        .modal-titulo {
            font-size:1.3rem;
            font-weight:700;
            color:#378C8C;
            margin-bottom:15px;
            text-align:center;
        }
        .modal-conteudo {
            font-size:1rem;
            color:#444;
            line-height:1.6;
            margin-bottom:25px;
        }
        .modal-fechar {
            display:block;
            margin:0 auto;
            padding:10px 18px;
            background:#378C8C;
            color:white;
            border:none;
            border-radius:10px;
            font-weight:600;
            cursor:pointer;
        }

        /* ÍNDICE */
        .indice { background:white; border-radius:15px; padding:20px; margin-bottom:20px; box-shadow:0 4px 10px rgba(0,0,0,0.1); }
        .indice h2 { color:#378C8C; margin-bottom:15px; font-size:1.3rem; }
        .indice-lista { display:flex; flex-direction:column; gap:10px; }
        .indice-item {
            display:block; padding:15px; background:rgba(55,140,140,0.08); border-radius:10px;
            border-left:4px solid #378C8C; text-decoration:none; color:#333; transition:all .2s;
        }
        .indice-item:hover { transform: translateY(-3px); }
        .indice-numero { font-weight:bold; color:#378C8C; font-size:1rem; }

        /* PÁGINAS */
        .pagina { background:white; border-radius:15px; padding:25px 20px; margin-bottom:20px; box-shadow:0 4px 10px rgba(0,0,0,0.1); border-top:5px solid #378C8C; position:relative; }
        .pagina-ambiente { border-top-color:#2E7D5F; }
        .pagina-comportamento { border-top-color:#2E7D5F; }
        .pagina-numero { position:absolute; top:15px; right:15px; background:#D45A2E; color:white; width:35px; height:35px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:bold; font-size:1rem; }
        .pagina-titulo { color:#378C8C; font-size:1.2rem; font-weight:600; margin-bottom:15px; padding-right:50px; }

        /* PERGUNTA */
        .pergunta { background: rgba(55,140,140,0.08); border-left:4px solid #378C8C; padding:15px; border-radius:0 10px 10px 0; margin-top:20px; }
        .pergunta-titulo { color:#378C8C; font-weight:600; font-size:0.9rem; margin-bottom:8px; }
        .pergunta-texto { font-size:1rem; color:#58594F; font-style:italic; line-height:1.5; }

        /* BOTÃO TOPO */
        .topo-btn {
            position: fixed; bottom:20px; right:20px; width:50px; height:50px; background:#378C8C; color:white; border-radius:50%;
            display:flex; align-items:center; justify-content:center; font-size:1.2rem; box-shadow:0 3px 10px rgba(0,0,0,0.2); text-decoration:none; opacity:0; transition:opacity .3s;
        }
        .topo-btn.visible { opacity:1; }

        /* RESPONSIVO */
        @media (max-width: 768px) {
            body { padding:8px; }
            .capa h1 { font-size:1.4rem; }
            .btn-sobre { font-size:0.85rem; padding:10px 15px; }
        }
    </style>
</head>
<body>

    <!-- POP-UP SOBRE -->
    <div class="modal-bg" id="modalSobre">
        <div class="modal-box">
            <div class="modal-titulo"><i class="fas fa-users"></i> Equipe do Projeto</div>
            <div class="modal-conteudo">
                <p><strong>Idealização:</strong><br>
                Aline Suene • aline.andrade@erobr.com<br>
                Odino Cutrim • odino.junior@erobr.com</p>

                <p><strong>Criação & Edição:</strong><br>
                Alexandre Oliveira<br>
                +55 (94) 99232-7693<br>
                alexandre.oliveira@erobr.com</p>

                <p><strong>Projeto:</strong><br>
                Revista Digital DSSMA – Beneficiamento ERO Tucumã</p>
            </div>

            <button class="modal-fechar" id="fecharSobre">Fechar</button>
        </div>
    </div>

    <a href="#capa" class="topo-btn" id="topoBtn" aria-label="Subir ao topo"><i class="fas fa-arrow-up"></i></a>

    <div class="container">
        <!-- CAPA -->
        <section class="capa" id="capa">
            
            <div style="text-align:center; margin-bottom:0px;">
                <img src="./logoERO.png" alt="Logo ERO Brasil" style="max-width:100px;height:auto;border-radius:5px">
            </div>
            
            <h1>Revista DSSMA - Beneficiamento ERO Tucumã</h1>
            <p>Diálogo Diário de Saúde, Segurança e Meio Ambiente • Edição Inaugural de Dezembro de 2025</p>
            <p style="margin-top:10px;"><strong>Cuidar é prevenir. Trabalhar juntos é evoluir.</strong></p>

            <!-- BOTÃO SOBRE -->
            <button class="btn-sobre" id="btnSobre">
                <i class="fas fa-info-circle"></i> Sobre
            </button>
        </section>

        <!-- ÍNDICE (mantido igual) -->
        <section class="indice" id="indice">
            <h2><i class="fas fa-list-ol"></i> Índice Interativo</h2>
            <p style="margin-bottom:15px; color:#666; font-size:0.9rem;">Toque em qualquer tópico para ler:</p>
            <div class="indice-lista" id="indiceLista"></div>

            <div style="text-align:center; margin-top:20px;">
                <a href="#pagina-1" id="startReadingBtn" class="btn" style="background:#D45A2E;">
                    <i class="fas fa-play-circle"></i> Começar a Ler
                </a>
            </div>
        </section>

        <div id="paginas"></div>

        <!-- RODAPÉ (mantido igual) -->
        <section class="rodape" id="rodape">
            <h3>Nossa segurança é construída todo dia, por cada um de nós.</h3>
            <p style="margin:15px 0; color:#555;">Comunique, previna, cuide-se e cuide do próximo.</p>
            <div style="margin:20px 0; color:#378C8C; font-weight:700; font-size:1.1rem;">PENSE SEGURO. AJA SEGURO. VOLTE SEGURO.</div>

            <a href="#capa" class="btn" style="background:#93BFBB;">
                <i class="fas fa-home"></i> Voltar ao Início
            </a>
        </section>
    </div>

<script>
(function(){
    'use strict';

    /* --- MODAL SOBRE --- */
    const btnSobre = document.getElementById("btnSobre");
    const modalSobre = document.getElementById("modalSobre");
    const fecharSobre = document.getElementById("fecharSobre");

    btnSobre.onclick = () => modalSobre.classList.add("show");
    fecharSobre.onclick = () => modalSobre.classList.remove("show");
    modalSobre.onclick = e => { if(e.target === modalSobre) modalSobre.classList.remove("show"); };

    /* BOTÃO TOPO */
    const topoBtn = document.getElementById('topoBtn');
    window.addEventListener('scroll', function() {
        if (window.scrollY > 300) topoBtn.classList.add('visible'); 
        else topoBtn.classList.remove('visible');
    });

    /* SUAVE PARA ÂNCORAS */
    document.addEventListener('click', function(e){
        const a = e.target.closest('a[href^="#"]');
        if (!a) return;
        const href = a.getAttribute('href');
        if (href === '#') return;
        const target = document.querySelector(href);
        if (target) {
            e.preventDefault();
            window.scrollTo({ top: target.offsetTop - 20, behavior: 'smooth' });
        }
    });

    /* CARREGAR TEMAS */
    async function carregarTemas() {
        try {
            const res = await fetch('temas.json', { cache: "no-store" });
            if (!res.ok) throw new Error('Erro ao carregar temas.json');
            const temas = await res.json();
            gerarIndice(temas);
            gerarPaginas(temas);
        } catch (err) {
            document.getElementById('paginas').innerHTML =
                '<div style="background:#ffecec;border:1px solid #f5c6cb;padding:20px;border-radius:10px;">Erro ao carregar temas.json</div>';
        }
    }

    function gerarIndice(temas) {
        const indiceLista = document.getElementById('indiceLista');
        indiceLista.innerHTML = temas.map(t => `
            <a href="#pagina-${t.id}" class="indice-item">
                <div class="indice-numero">${t.id}. ${t.titulo}</div>
            </a>
        `).join('');
    }

    function gerarPaginas(temas) {
        const paginas = document.getElementById('paginas');
        paginas.innerHTML = temas.map((t, i) => `
            <section class="pagina" id="pagina-${t.id}">
                <div class="pagina-numero">${t.id}</div>
                <h2 class="pagina-titulo"><i class="${t.icone}"></i> ${t.titulo}</h2>
                <div class="pagina-conteudo">${t.conteudo}</div>

                <div class="pergunta">
                    <div class="pergunta-titulo"><i class="fas fa-question-circle"></i> PARA REFLEXÃO NO DSSMA</div>
                    <div class="pergunta-texto">"${t.pergunta}"</div>
                </div>
            </section>
        `).join('');
    }

    carregarTemas();
})();
</script>
</body>
</html>